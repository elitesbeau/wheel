<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
  <meta name="theme-color" content="#000">
  <title>Admin Panel - Market Elites</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    :root{--bg:#0a0a0a;--card:#1a1a1a;--border:#2a2a2a;--text:#fff;--text2:#888;--green:#34c759;--red:#ff3b30;--blue:#007aff;--orange:#ff9500;--purple:#af52de}
    body{font-family:'Inter',-apple-system,BlinkMacSystemFont,sans-serif;background:var(--bg);color:var(--text);padding:20px}
    .container{max-width:1400px;margin:0 auto}
    .header{display:flex;justify-content:space-between;align-items:center;margin-bottom:32px;padding:20px;background:var(--card);border:1px solid var(--border);border-radius:16px}
    .logo{font-size:24px;font-weight:800}
    .logo span{color:var(--blue)}
    .stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin-bottom:32px}
    .stat-card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:24px}
    .stat-label{font-size:13px;color:var(--text2);margin-bottom:8px;text-transform:uppercase;letter-spacing:.5px}
    .stat-value{font-size:32px;font-weight:700;margin-bottom:4px}
    .stat-value.green{color:var(--green)}
    .stat-value.blue{color:var(--blue)}
    .stat-value.orange{color:var(--orange)}
    .stat-value.purple{color:var(--purple)}
    .stat-change{font-size:13px;color:var(--text2)}
    .stat-change.up{color:var(--green)}
    .stat-change.down{color:var(--red)}
    .section{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:24px;margin-bottom:32px}
    .section-title{font-size:18px;font-weight:700;margin-bottom:20px;display:flex;justify-content:space-between;align-items:center}
    .btn{padding:10px 20px;background:var(--blue);border:none;border-radius:8px;color:#fff;font-weight:600;cursor:pointer;font-size:14px}
    .btn:hover{opacity:.9}
    .btn-outline{background:transparent;border:1px solid var(--border);color:var(--text)}
    .btn-red{background:var(--red)}
    .btn-green{background:var(--green)}
    .btn-small{padding:6px 12px;font-size:12px}
    table{width:100%;border-collapse:collapse}
    th{text-align:left;font-size:12px;color:var(--text2);font-weight:600;text-transform:uppercase;letter-spacing:.5px;padding:12px;border-bottom:1px solid var(--border)}
    td{padding:16px 12px;border-bottom:1px solid var(--border);font-size:14px}
    tr:last-child td{border-bottom:none}
    .badge{display:inline-block;padding:4px 10px;border-radius:6px;font-size:11px;font-weight:700}
    .badge.active{background:rgba(52,199,89,.2);color:var(--green)}
    .badge.pending{background:rgba(255,149,0,.2);color:var(--orange)}
    .badge.inactive{background:rgba(136,136,136,.2);color:var(--text2)}
    .badge.premium{background:rgba(175,82,222,.2);color:var(--purple)}
    .badge.free{background:rgba(0,122,255,.2);color:var(--blue)}
    .form-group{margin-bottom:16px}
    .form-label{font-size:13px;font-weight:600;margin-bottom:8px;display:block}
    .form-input,.form-select,.form-textarea{width:100%;background:var(--bg);border:1px solid var(--border);border-radius:8px;padding:12px;color:var(--text);font-size:14px;outline:none}
    .form-textarea{min-height:100px;resize:vertical;font-family:inherit}
    .modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.8);z-index:1000;align-items:center;justify-content:center}
    .modal.show{display:flex}
    .modal-content{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:32px;max-width:600px;width:90%;max-height:90vh;overflow-y:auto}
    .modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}
    .modal-title{font-size:20px;font-weight:700}
    .close-btn{background:none;border:none;color:var(--text2);font-size:24px;cursor:pointer;padding:0;width:32px;height:32px}
    .tabs{display:flex;gap:8px;margin-bottom:20px;border-bottom:1px solid var(--border)}
    .tab-btn{padding:12px 20px;background:none;border:none;color:var(--text2);font-weight:600;cursor:pointer;border-bottom:2px solid transparent}
    .tab-btn.active{color:var(--text);border-bottom-color:var(--blue)}
    .tab-content{display:none}
    .tab-content.active{display:block}
    .live-dot{display:inline-block;width:8px;height:8px;background:var(--green);border-radius:50%;margin-right:6px;animation:pulse 2s infinite}
    @keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}
    .chart-placeholder{height:200px;background:var(--bg);border-radius:8px;display:flex;align-items:center;justify-content:center;color:var(--text2);margin-top:16px}
    .action-buttons{display:flex;gap:8px;justify-content:flex-end}
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="logo">Market Elites <span>Admin</span></div>
      <div style="display:flex;gap:12px;align-items:center">
        <span style="font-size:13px;color:var(--text2)">Admin User</span>
        <button class="btn btn-outline btn-small" onclick="logout()">Logout</button>
      </div>
    </div>

    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-label">Total Users</div>
        <div class="stat-value blue" id="totalUsers">0</div>
        <div class="stat-change up" id="usersChange">+0 this week</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Premium Members</div>
        <div class="stat-value purple" id="premiumUsers">0</div>
        <div class="stat-change" id="premiumChange">0% conversion</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Active Positions</div>
        <div class="stat-value green" id="activePositions">0</div>
        <div class="stat-change" id="positionsChange">0 total contracts</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Revenue (MRR)</div>
        <div class="stat-value orange" id="revenue">$0</div>
        <div class="stat-change" id="revenueChange">$0 this month</div>
      </div>
    </div>

    <div class="tabs">
      <button class="tab-btn active" onclick="switchTab('signals')">Signals</button>
      <button class="tab-btn" onclick="switchTab('users')">Users</button>
      <button class="tab-btn" onclick="switchTab('analytics')">Analytics</button>
      <button class="tab-btn" onclick="switchTab('settings')">Settings</button>
    </div>

    <div class="tab-content active" id="signalsTab">
      <div class="section">
        <div class="section-title">
          <span><span class="live-dot"></span>Live Trading Signals</span>
          <button class="btn" onclick="openModal('addSignalModal')">+ Add Signal</button>
        </div>
        <table id="signalsTable">
          <thead>
            <tr>
              <th>Ticker</th>
              <th>Type</th>
              <th>Strike</th>
              <th>Expiration</th>
              <th>Premium</th>
              <th>Delta</th>
              <th>Status</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="signalsBody"></tbody>
        </table>
      </div>
    </div>

    <div class="tab-content" id="usersTab">
      <div class="section">
        <div class="section-title">
          <span>User Management</span>
          <button class="btn btn-outline" onclick="refreshUsers()">â†» Refresh</button>
        </div>
        <table>
          <thead>
            <tr>
              <th>User</th>
              <th>Email</th>
              <th>Plan</th>
              <th>Joined</th>
              <th>Positions</th>
              <th>Status</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="usersBody"></tbody>
        </table>
      </div>
    </div>

    <div class="tab-content" id="analyticsTab">
      <div class="section">
        <div class="section-title">Platform Analytics</div>
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-label">Total Trades</div>
            <div class="stat-value" id="totalTrades">0</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">Win Rate</div>
            <div class="stat-value green" id="winRate">0%</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">Total Premium Collected</div>
            <div class="stat-value green" id="totalPremium">$0</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">Avg Position Size</div>
            <div class="stat-value" id="avgSize">0</div>
          </div>
        </div>
        <div class="chart-placeholder">Chart: User Growth Over Time (Coming Soon)</div>
        <div class="chart-placeholder">Chart: Revenue Trends (Coming Soon)</div>
      </div>
    </div>

    <div class="tab-content" id="settingsTab">
      <div class="section">
        <div class="section-title">System Settings</div>
        <div class="form-group">
          <label class="form-label">Platform Mode</label>
          <select class="form-select" id="platformMode">
            <option value="live">Live</option>
            <option value="maintenance">Maintenance</option>
            <option value="readonly">Read Only</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Premium Price (Monthly)</label>
          <input type="number" class="form-input" id="premiumPrice" value="9.99" step="0.01">
        </div>
        <div class="form-group">
          <label class="form-label">Max Free Signals</label>
          <input type="number" class="form-input" id="maxFreeSignals" value="1">
        </div>
        <div class="form-group">
          <label class="form-label">System Announcement</label>
          <textarea class="form-textarea" id="announcement" placeholder="Enter announcement message..."></textarea>
        </div>
        <button class="btn" onclick="saveSettings()">Save Settings</button>
      </div>

      <div class="section">
        <div class="section-title">Database Management</div>
        <div class="action-buttons">
          <button class="btn btn-outline" onclick="exportData()">Export Data</button>
          <button class="btn btn-outline" onclick="backupData()">Backup Database</button>
          <button class="btn btn-red" onclick="clearCache()">Clear Cache</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Add Signal Modal -->
  <div class="modal" id="addSignalModal">
    <div class="modal-content">
      <div class="modal-header">
        <span class="modal-title">Add New Signal</span>
        <button class="close-btn" onclick="closeModal('addSignalModal')">&times;</button>
      </div>
      <div class="form-group">
        <label class="form-label">Type</label>
        <select class="form-select" id="signalType">
          <option value="csp">Cash Secured Put</option>
          <option value="cc">Covered Call</option>
        </select>
      </div>
      <div class="form-group">
        <label class="form-label">Ticker</label>
        <input type="text" class="form-input" id="signalTicker" placeholder="AAPL" style="text-transform:uppercase">
      </div>
      <div class="form-group">
        <label class="form-label">Strike Price</label>
        <input type="number" class="form-input" id="signalStrike" placeholder="150" step="0.5">
      </div>
      <div class="form-group">
        <label class="form-label">Expiration</label>
        <input type="text" class="form-input" id="signalExp" placeholder="Jan 24">
      </div>
      <div class="form-group">
        <label class="form-label">Premium</label>
        <input type="number" class="form-input" id="signalPremium" placeholder="2.50" step="0.01">
      </div>
      <div class="form-group">
        <label class="form-label">Delta</label>
        <input type="number" class="form-input" id="signalDelta" placeholder="0.25" step="0.01" max="1">
      </div>
      <div style="display:flex;gap:12px">
        <button class="btn" onclick="addSignal()">Add Signal</button>
        <button class="btn btn-outline" onclick="closeModal('addSignalModal')">Cancel</button>
      </div>
    </div>
  </div>

  <script>
    // Mock data store
    const adminData = {
      signals: [
        {id: 1, type: 'csp', ticker: 'NVDA', strike: 130, exp: 'Jan 24', premium: 3.20, delta: 0.25, status: 'active', time: '2h ago'},
        {id: 2, type: 'cc', ticker: 'AAPL', strike: 260, exp: 'Jan 31', premium: 2.80, delta: 0.30, status: 'active', time: '5h ago'},
        {id: 3, type: 'csp', ticker: 'AMD', strike: 135, exp: 'Feb 7', premium: 4.50, delta: 0.28, status: 'pending', time: '1d ago'}
      ],
      users: [
        {id: 1, name: 'John Doe', email: 'john@example.com', plan: 'premium', joined: '2024-12-15', positions: 5, status: 'active'},
        {id: 2, name: 'Jane Smith', email: 'jane@example.com', plan: 'free', joined: '2025-01-05', positions: 2, status: 'active'},
        {id: 3, name: 'Mike Johnson', email: 'mike@example.com', plan: 'premium', joined: '2024-11-20', positions: 8, status: 'active'},
        {id: 4, name: 'Sarah Williams', email: 'sarah@example.com', plan: 'free', joined: '2025-01-10', positions: 1, status: 'inactive'}
      ],
      stats: {
        totalUsers: 247,
        premiumUsers: 52,
        activePositions: 184,
        revenue: 519.48,
        totalTrades: 1523,
        winRate: 74.2,
        totalPremium: 45680.50,
        avgSize: 2.8
      }
    };

    function loadDashboard() {
      // Update stats
      document.getElementById('totalUsers').textContent = adminData.stats.totalUsers;
      document.getElementById('premiumUsers').textContent = adminData.stats.premiumUsers;
      document.getElementById('activePositions').textContent = adminData.stats.activePositions;
      document.getElementById('revenue').textContent = '$' + adminData.stats.revenue.toFixed(2);

      document.getElementById('usersChange').textContent = '+23 this week';
      document.getElementById('premiumChange').textContent = ((adminData.stats.premiumUsers / adminData.stats.totalUsers) * 100).toFixed(1) + '% conversion';
      document.getElementById('positionsChange').textContent = adminData.stats.activePositions + ' total contracts';
      document.getElementById('revenueChange').textContent = '$' + (adminData.stats.revenue * 0.85).toFixed(2) + ' this month';

      // Analytics stats
      document.getElementById('totalTrades').textContent = adminData.stats.totalTrades;
      document.getElementById('winRate').textContent = adminData.stats.winRate + '%';
      document.getElementById('totalPremium').textContent = '$' + adminData.stats.totalPremium.toLocaleString();
      document.getElementById('avgSize').textContent = adminData.stats.avgSize + ' contracts';

      renderSignals();
      renderUsers();
    }

    function renderSignals() {
      const tbody = document.getElementById('signalsBody');
      tbody.innerHTML = adminData.signals.map(s => `
        <tr>
          <td><strong>${s.ticker}</strong></td>
          <td><span class="badge ${s.type === 'csp' ? 'active' : 'free'}">${s.type.toUpperCase()}</span></td>
          <td>$${s.strike}</td>
          <td>${s.exp}</td>
          <td>$${s.premium.toFixed(2)}</td>
          <td>${s.delta}</td>
          <td><span class="badge ${s.status}">${s.status}</span></td>
          <td>
            <button class="btn btn-small btn-outline" onclick="editSignal(${s.id})">Edit</button>
            <button class="btn btn-small btn-red" onclick="deleteSignal(${s.id})">Delete</button>
          </td>
        </tr>
      `).join('');
    }

    function renderUsers() {
      const tbody = document.getElementById('usersBody');
      tbody.innerHTML = adminData.users.map(u => `
        <tr>
          <td><strong>${u.name}</strong></td>
          <td>${u.email}</td>
          <td><span class="badge ${u.plan}">${u.plan}</span></td>
          <td>${u.joined}</td>
          <td>${u.positions}</td>
          <td><span class="badge ${u.status}">${u.status}</span></td>
          <td>
            <button class="btn btn-small btn-outline" onclick="viewUser(${u.id})">View</button>
            <button class="btn btn-small ${u.plan === 'free' ? 'btn-green' : 'btn-red'}" onclick="togglePlan(${u.id})">${u.plan === 'free' ? 'Upgrade' : 'Downgrade'}</button>
          </td>
        </tr>
      `).join('');
    }

    function switchTab(tab) {
      document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
      document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
      event.target.classList.add('active');
      document.getElementById(tab + 'Tab').classList.add('active');
    }

    function openModal(id) {
      document.getElementById(id).classList.add('show');
    }

    function closeModal(id) {
      document.getElementById(id).classList.remove('show');
    }

    function addSignal() {
      const signal = {
        id: Date.now(),
        type: document.getElementById('signalType').value,
        ticker: document.getElementById('signalTicker').value.toUpperCase(),
        strike: parseFloat(document.getElementById('signalStrike').value),
        exp: document.getElementById('signalExp').value,
        premium: parseFloat(document.getElementById('signalPremium').value),
        delta: parseFloat(document.getElementById('signalDelta').value),
        status: 'active',
        time: 'Just now'
      };

      adminData.signals.unshift(signal);
      renderSignals();
      closeModal('addSignalModal');
      alert('Signal added successfully!');
    }

    function deleteSignal(id) {
      if (confirm('Delete this signal?')) {
        adminData.signals = adminData.signals.filter(s => s.id !== id);
        renderSignals();
      }
    }

    function editSignal(id) {
      alert('Edit functionality - Signal ID: ' + id);
    }

    function viewUser(id) {
      const user = adminData.users.find(u => u.id === id);
      alert('User Details:\n' + JSON.stringify(user, null, 2));
    }

    function togglePlan(id) {
      const user = adminData.users.find(u => u.id === id);
      user.plan = user.plan === 'free' ? 'premium' : 'free';
      renderUsers();
    }

    function refreshUsers() {
      alert('Refreshing user data...');
      renderUsers();
    }

    function saveSettings() {
      alert('Settings saved successfully!');
    }

    function exportData() {
      alert('Exporting data...');
    }

    function backupData() {
      alert('Creating backup...');
    }

    function clearCache() {
      if (confirm('Clear all cache? This cannot be undone.')) {
        alert('Cache cleared!');
      }
    }

    function logout() {
      if (confirm('Logout?')) {
        window.location.href = 'index.html';
      }
    }

    // Initialize
    loadDashboard();
  </script>
</body>
</html>
